const w=window.innerWidth,shiftFactor=.3,shiftAmmount=.3*w,startAirport="CYYZ",globe=Globe()(document.getElementById("globeViz")).globeImageUrl("//unpkg.com/three-globe/example/img/earth-dark.jpg").bumpImageUrl("//unpkg.com/three-globe/example/img/earth-topology.png").backgroundImageUrl("//unpkg.com/three-globe/example/img/night-sky.png").width(w+shiftAmmount).pointOfView({lat:DATA.CYYZ.lat,lng:DATA.CYYZ.long,altitude:2});function getTimes(){return currentTime=Math.floor(Date.now()/1e3),prevTime=currentTime-172800,[String(prevTime),String(currentTime)]}function getData(t,e){const r=DATA[e].lat,o=DATA[e].long;rotateGlobe(r,o),times=getTimes();var n=[];const a="https://opensky-network.org/api/flights/departure?airport="+e+"&begin="+times[0]+"&end="+times[1];var i=new XMLHttpRequest;i.open("GET",a,!0),i.onload=function(){var a=JSON.parse(this.response);i.status>=200&&i.status<400?a.forEach((t=>{null!=t.estArrivalAirport&&null!=DATA[t.estArrivalAirport]&&n.push({startLat:r,startLng:o,endLat:DATA[t.estArrivalAirport].lat,endLng:DATA[t.estArrivalAirport].long})})):console.log("error"),t(n,e)},i.send()}function rotateGlobe(t,e){globe.pointOfView({lat:t,lng:e,altitude:2},600)}function setRoutes(t,e){globe.arcColor(["#9400D3","#FF7F50"]),globe.arcsData(t)}getData(callback=setRoutes,ICAO="CYYZ");